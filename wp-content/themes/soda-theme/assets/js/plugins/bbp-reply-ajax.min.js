/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(v){function c(e,i,d){if(e.find(".bbp-reply-form form").find("#bbp-template-notices").html(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media){e.find(".gif-media-search-dropdown").removeClass("open"),e.find("#whats-new-toolbar .toolbar-button").removeClass("active disable");var o=e.find("#whats-new-attachments .forums-attached-gif-container");o&&(o.addClass("closed"),o.find(".gif-image-container img").attr("src",""),o[0].style=""),e.find("#bbp_media_gif").length&&e.find("#bbp_media_gif").val(""),void 0!==i&&d&&(void 0!==bp.Nouveau.Media.dropzone_obj[i]&&(bp.Nouveau.Media.dropzone_obj[i].destroy(),bp.Nouveau.Media.dropzone_obj.splice(i,1),bp.Nouveau.Media.dropzone_media.splice(i,1)),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-document-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"))}}v("body").hasClass("reply-edit")||v(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),v(this).hasClass("submitting"))return!1;v(this).addClass("submitting");var i=!0,d=!0,o=v(e.target).find(".bbp-the-content").data("key"),t=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[o]&&(t=window.forums_medium_reply_editor[o]),(0<v(this).find("#bbp_media").length&&0<v(this).find("#bbp_document").length&&0<v(this).find("#bbp_media_gif").length&&""==v(this).find("#bbp_media").val()&&""==v(this).find("#bbp_document").val()&&""==v(this).find("#bbp_media_gif").val()||0<v(this).find("#bbp_media").length&&0<v(this).find("#bbp_document").length&&v(this).find("#bbp_media_gif").length<=0&&""==v(this).find("#bbp_media").val()&&""==v(this).find("#bbp_document").val()||0<v(this).find("#bbp_media_gif").length&&v(this).find("#bbp_media").length<=0&&v(this).find("#bbp_document").length<=0&&""==v(this).find("#bbp_media_gif").val())&&(d=!1),!t||""!==v.trim(t.getContent().replace("<p><br></p>",""))&&""!==v(t.getContent().replace(/&nbsp;/g," ")).text().trim()||0!=d?t||""!==v.trim(v(this).find("#bbp_reply_content").val())||0!=d?(t&&v(this).find(".bbp-the-content").removeClass("error"),v(this).find("#bbp_reply_content").removeClass("error")):(v(this).find("#bbp_reply_content").addClass("error"),i=!1):(v(this).find(".bbp-the-content").addClass("error"),i=!1),i?function(e,i,d,o){var t={action:e,nonce:i};v.each(d,function(e,i){"action"===i.name?t.bbp_reply_form_action=i.value:t[i.name]=i.value});var _=o.closest("#bbpress-forums");v.post(window.bbpReplyAjaxJS.bbp_ajaxurl,t,function(e){if(e.success){_.find(".bbp-reply-form form").removeClass("submitting");var i="";if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",v("#post-"+e.reply_id).parent("li").replaceWith(i);else if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var d=null,o="1";if(v("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var t=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;d=v("#post-"+e.reply_parent).closest("li.depth-"+t),o=window.bbpReplyAjaxJS.threaded_reply_depth}else d=v("#post-"+e.reply_parent).parent("li"),o=parseInt(d.data("depth"))+1;var a="ul";_.find(".bb-single-reply-list").is("ol")&&(a="ol"),d.find(">"+a+".bbp-threaded-replies").length||d.append("<"+a+' class="bbp-threaded-replies"></'+a+">"),i='<li class="highlight depth-'+o+'" data-depth="'+o+'">'+e.content+"</li>",d.find(">"+a+".bbp-threaded-replies").append(i)}else i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",_.find(".bb-single-reply-list").append(i);if(""!==e.tags){var n=v("body .item-tags"),p=v("body .item-tags ul");"none"===n.css("display")?(n.append(e.tags),n.show()):(p.remove(),n.append(e.tags))}""!=i&&(v("body").animate({scrollTop:v(i).offset().top},500),setTimeout(function(){v(i).removeClass("highlight")},2e3));var r=_.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),s=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[r]&&bp.Nouveau.Media.dropzone_media[r].length){s=!0;for(var l=0;l<bp.Nouveau.Media.dropzone_media[r].length;l++)bp.Nouveau.Media.dropzone_media[r][l].saved=!0}var b=_.find(".bbp-reply-form form").find("#forums-post-document-uploader").data("key"),f=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[b]&&bp.Nouveau.Media.dropzone_media[b].length){f=!0;for(l=0;l<bp.Nouveau.Media.dropzone_media[b].length;l++)bp.Nouveau.Media.dropzone_media[b][l].saved=!0}var m=_.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[m]&&window.forums_medium_reply_editor[m].resetContent(),_.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),_.find("#bbp-close-btn").trigger("click"),_.find("#bbp_reply_content").val(""),c(_,r,s),c(_,b,f);var u=_.find(".scrubberpost");for(var h in u)if(v(u[h]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(h,10)+1,"");break}}else void 0!==e.content&&_.find(".bbp-reply-form form").find("#bbp-template-notices").html(e.content);_.find(".bbp-reply-form form").removeClass("submitting")})}("reply",window.bbpReplyAjaxJS.reply_nonce,v(this).serializeArray(),v(this)):v(this).removeClass("submitting")})});